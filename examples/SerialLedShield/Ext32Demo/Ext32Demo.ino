/*
  Ext32Demo.ino

  最大数の32個LEDを使った演出デモ

  JP3の上段を1-2ショートに変更し、EXT端子側に32個LEDを接続します。

  This example code is in the public domain.
*/
// include library codes
#include <SoftwareSerial.h>
#include <SerialLedController.h> // library

/* Commands Table. Run sequentially. */
const uint8_t led_play_list[][SERIALCOMMAND_FIXEDLEN] =
{
  { 0x94, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, /* Rec Start. */
  { 0x90, 0x01, 0x00, 0x00, 0x20, 0x00, 0x14, 0x00 }, /* System */
  { 0x8C, 0x28, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00 }, /* Color */
  { 0x8C, 0x28, 0x07, 0x00, 0x02, 0x00, 0x00, 0x00 }, /* Color */
  { 0x8C, 0x28, 0x0D, 0x00, 0x04, 0x00, 0x00, 0x00 }, /* Color */
  { 0x8C, 0x28, 0x14, 0x00, 0x08, 0x00, 0x00, 0x00 }, /* Color */
  { 0x8C, 0x28, 0x1B, 0x00, 0x10, 0x00, 0x00, 0x00 }, /* Color */
  { 0x8C, 0x28, 0x21, 0x00, 0x20, 0x00, 0x00, 0x00 }, /* Color */
  { 0x8C, 0x28, 0x28, 0x00, 0x40, 0x00, 0x00, 0x00 }, /* Color */
  { 0x8C, 0x21, 0x28, 0x00, 0x80, 0x00, 0x00, 0x00 }, /* Color */
  { 0x8C, 0x1B, 0x28, 0x00, 0x00, 0x01, 0x00, 0x00 }, /* Color */
  { 0x8C, 0x14, 0x28, 0x00, 0x00, 0x02, 0x00, 0x00 }, /* Color */
  { 0x8C, 0x0D, 0x28, 0x00, 0x00, 0x04, 0x00, 0x00 }, /* Color */
  { 0x8C, 0x07, 0x28, 0x00, 0x00, 0x08, 0x00, 0x00 }, /* Color */
  { 0x8C, 0x00, 0x28, 0x00, 0x00, 0x10, 0x00, 0x00 }, /* Color */
  { 0x8C, 0x00, 0x28, 0x07, 0x00, 0x20, 0x00, 0x00 }, /* Color */
  { 0x8C, 0x00, 0x28, 0x0D, 0x00, 0x40, 0x00, 0x00 }, /* Color */
  { 0x8C, 0x00, 0x28, 0x14, 0x00, 0x80, 0x00, 0x00 }, /* Color */
  { 0x8C, 0x00, 0x28, 0x1B, 0x00, 0x00, 0x01, 0x00 }, /* Color */
  { 0x8C, 0x00, 0x28, 0x21, 0x00, 0x00, 0x02, 0x00 }, /* Color */
  { 0x8C, 0x00, 0x28, 0x28, 0x00, 0x00, 0x04, 0x00 }, /* Color */
  { 0x8C, 0x00, 0x21, 0x28, 0x00, 0x00, 0x08, 0x00 }, /* Color */
  { 0x8C, 0x00, 0x1B, 0x28, 0x00, 0x00, 0x10, 0x00 }, /* Color */
  { 0x8C, 0x00, 0x14, 0x28, 0x00, 0x00, 0x20, 0x00 }, /* Color */
  { 0x8C, 0x00, 0x0D, 0x28, 0x00, 0x00, 0x40, 0x00 }, /* Color */
  { 0x8C, 0x00, 0x07, 0x28, 0x00, 0x00, 0x80, 0x00 }, /* Color */
  { 0x8C, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x01 }, /* Color */
  { 0x8C, 0x07, 0x00, 0x28, 0x00, 0x00, 0x00, 0x02 }, /* Color */
  { 0x8C, 0x0D, 0x00, 0x28, 0x00, 0x00, 0x00, 0x04 }, /* Color */
  { 0x8C, 0x14, 0x00, 0x28, 0x00, 0x00, 0x00, 0x08 }, /* Color */
  { 0x8C, 0x1B, 0x00, 0x28, 0x00, 0x00, 0x00, 0x10 }, /* Color */
  { 0x8C, 0x21, 0x00, 0x28, 0x00, 0x00, 0x00, 0x20 }, /* Color */
  { 0x8C, 0x28, 0x00, 0x28, 0x00, 0x00, 0x00, 0x40 }, /* Color */
  { 0x8C, 0x28, 0x00, 0x21, 0x00, 0x00, 0x00, 0x80 }, /* Color */
  { 0x93, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00 }, /* Loop */
  { 0x8C, 0x28, 0x00, 0x1B, 0x07, 0x00, 0x00, 0x00 }, /* Color */
  { 0x92, 0x01, 0x01, 0x00, 0x9D, 0x00, 0x0A, 0x00 }, /* Shift */
  { 0x95, 0x3C, 0x01, 0x14, 0xF4, 0x01, 0x00, 0x00 }, /* Rainbow */
  { 0x96, 0x20, 0x00, 0x00, 0x06, 0x32, 0x32, 0x03 }, /* Bar */
  { 0x97, 0x40, 0x03, 0x14, 0x04, 0x00, 0x00, 0x00 }, /* Seesaw */
  { 0x8C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, /* Color */
  { 0x94, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, /* Rec End. */
};

// ソフトウェアシリアルのインスタンスを生成する。
// TXとRXのPIN番号を指定する。
// ※シールドのJP1の設定は、上段・下段共に2-3をショート（デフォルト）
SoftwareSerial softSerial(2, 3);

// シリアルコントローラ用ライブラリのインスタンスを生成する。
// リセットとボーレート指定用のPIN番号を指定する。もし利用しない場合は－１を指定する。
SerialLedController controller(4, 5);

void setup()
{
  // シリアルクラスと、通信速度（true:57600, false:19200）を指定する
  controller.begin(&softSerial, true);

  // もしハードウェアシリアルを利用する場合は、以下のように与える
  // ※シールドのJP1の設定は、上段・下段共に1-2をショートとする。
  // Arduinoのシリアルモニタは使えなくなります。
  //controller.begin(&Serial, true);

  // 演出用のテーブルを与える。（コントローラにデータを転送する）  
  if(controller.write(led_play_list, sizeof(led_play_list))){
    // 転送に成功したら演出を開始する。
    controller.start();
  }
}

void loop()
{
}
